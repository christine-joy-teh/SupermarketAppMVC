<%- include('partials/head', { pageTitle: 'Promotion - Supermarket App' }) %>
<%- include('partials/navbar', {
  navLinksLeft: [
    { href: '/inventory', label: 'Inventory' },
    { href: '/addProduct', label: 'Add Product' },
    { href: '/admin/orders', label: 'Orders' },
    { href: '/admin/refunds', label: 'Refunds' },
    { href: '/admin/users', label: 'Users' },
    { href: '/admin/promotion', label: 'Promotion', active: true }
  ],
  navLinksRight: [
    { href: '/logout', label: 'Logout' }
  ]
}) %>

<div class="container py-4" style="max-width: 720px;">
  <h3 class="mb-3">Promotion Settings</h3>
  <% if (success && success.length) { %>
    <div class="alert alert-success"><%= success[0] %></div>
  <% } %>
  <% if (error && error.length) { %>
    <div class="alert alert-danger"><%= error[0] %></div>
  <% } %>

  <form action="/admin/promotion" method="POST" class="card card-body shadow-sm">
    <div class="mb-3">
      <label class="form-label" for="keywords">Keywords (comma-separated)</label>
      <input type="text" id="keywords" name="keywords" class="form-control" required value="<%= promo && promo.keywords ? promo.keywords.join(', ') : '' %>">
      <small class="text-muted">Applies promotion to products whose name contains these words.</small>
    </div>
    <div class="mb-3">
      <label class="form-label" for="percent">Percent discount</label>
      <input type="number" id="percent" name="percent" class="form-control" min="1" max="100" step="0.1" required value="<%= promo && promo.percent ? promo.percent : 10 %>">
      <small class="text-muted">Applies to matching items only.</small>
    </div>
    <div class="d-flex gap-2 mt-3">
      <button type="submit" class="btn btn-primary">Save Promotion</button>
      <a href="/inventory" class="btn btn-secondary">Back</a>
    </div>
  </form>
</div>

<%- include('partials/footer') %>
